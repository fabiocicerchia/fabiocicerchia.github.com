<?xml version="1.0" encoding="UTF-8"?>
<entities xmlns="http://www.w3.org/2005/Atom">
    <id>urn:uuid:{{ app.request.requestUri|md5 }}</id>
    <title type="text">Fabio Cicerchia API - Experience</title>
    <link rel="self"
          href="http://{{ app.request.host }}{{ app.request.requestUri }}" />
    <link rel="describedby"
          href="http://{{ app.request.host }}/api.php/service-expression-syntax"
          type="plain/txt" />
    <link rel="author" href="http://{{ app.request.host }}" />

    <updated>{{ "now"|date("Y-m-d") }}T{{ "now"|date("Y-m-d") }}Z</updated>
    <author>
        <name>Fabio Cicerchia</name>
        <uri>http://www.fabiocicerchia.it</uri>
        <email>info@fabiocicerchia.it</email>
    </author>
    <rights>Copyright (c) {{ "now"|date("Y") }}, Fabio Cicerchia</rights>

    {% for entity in entities %}
    <entity>
        <id>urn:uuid:{{ entity._id }}</id>
        <title>{{ entity.role }}</title>
        <!-- TODO: INSERT THE LINK TAG -->
        <updated>{{ "now"|date("Y-m-d") }}T{{ "now"|date("H:i:s") }}Z</updated>
        <published>{{ entity.date.end }}</published>

        <content type="xhtml">
            <!--h3 itemprop="name" class="summary">{{ entity.role }}</h3-->
            <!--div class="dates">{{ entity.date.start }} {{ entity.date.end }}</div-->
            <div itemtype="http://schema.org/Organization"
                 itemscope="itemscope" class="contact">
                <a title="{{ entity.company.name }}" rel="nofollow"
                   href="{{ entity.company.url }}" target="_blank"
                   itemprop="url" class="url">
                    <span itemprop="name" class="fn">
                        {{ entity.company.name }}
                    </span>
                </a>
                <div itemprop="description">
                    <p>{{ entity.description }}</p> <!-- TODO: ADD TO MONGODB -->
                </div>
                <address itemtype="http://schema.org/PostalAddress"
                         itemscope="itemscope" itemprop="address"
                         class="adr">
                    <span itemprop="postalCode" class="postal-code">
                        {{ entity.company.location.cap }}
                    </span>
                    <span itemprop="addressLocality" class="locality">
                        {{ entity.company.location.city }}
                    </span>
                    <span itemprop="addressCountry" class="country-name">
                        {{ entity.company.location.country }}
                    </span>
                </address>
            </div>
            {% if entity.technologies %}
            <dl class="first adjacent"
                itemtype="http://schema.org/ItemList"
                itemscope="itemscope">
                <dt itemprop="name">Technologies</dt>
                {% for technology in entity.technologies|keys %}
                {% if loop.last %}
                <dd class="last" itemprop="itemListElement">
                    {{ technology }}
                </dd>
                {% else %}
                <dd itemprop="itemListElement">{{ technology }}</dd>
                {% endif %}
                {% endfor %}
            </dl>
            {% endif %}
            {% if entity.tools %}
            <dl class="adjacent" itemtype="http://schema.org/ItemList"
                itemscope="itemscope">
                <dt itemprop="name">Tools</dt>
                {% for tool in entity.tools|keys %}
                {% if loop.last %}
                <dd class="last" itemprop="itemListElement">{{ tool }}</dd>
                {% else %}
                <dd itemprop="itemListElement">{{ tool }}</dd>
                {% endif %}
                {% endfor %}
            </dl>
            {% endif %}
            {% if entity.methodologies|keys %}
            <dl class="adjacent" itemtype="http://schema.org/ItemList"
                itemscope="itemscope">
                <dt itemprop="name">Methodologies</dt>
                {% for methodology in entity.methodologies %}
                {% if loop.last %}
                <dd class="last" itemprop="itemListElement">
                    {{ methodology }}
                </dd>
                {% else %}
                <dd itemprop="itemListElement">{{ methodology }}</dd>
                {% endif %}
                {% endfor %}
            </dl>
            {% endif %}
            {% if entity.techniques %}
            <dl class="adjacent" itemtype="http://schema.org/ItemList"
                itemscope="itemscope">
                <dt itemprop="name">Techniques</dt>
                {% for technique in entity.techniques|keys %}
                {% if loop.last %}
                <dd class="last" itemprop="itemListElement">
                    {{ technique }}
                </dd>
                {% else %}
                <dd itemprop="itemListElement">{{ technique }}</dd>
                {% endif %}
                {% endfor %}
            </dl>
            {% endif %}
        </content>
    </entity>
    {% endfor %}
</entities>
